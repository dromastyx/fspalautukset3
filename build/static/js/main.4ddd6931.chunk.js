(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{14:function(e,n,t){e.exports=t(36)},36:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),u=t(13),c=t.n(u),o=t(2),l=function(e){var n=e.person,t=e.handleClick;return r.a.createElement("li",null,n.name," ",n.number,r.a.createElement("button",{onClick:t},"delete"))},i=t(3),d=t.n(i),m="/api/persons",f=function(){return d.a.get(m).then((function(e){return e.data}))},s=function(e){return d.a.post(m,e).then((function(e){return e.data}))},h=function(e){return d.a.delete("".concat(m,"/").concat(e)).then((function(e){return e.data}))},b=function(e,n){return d.a.put("".concat(m,"/").concat(e),n).then((function(e){return e.data}))},p=function(e){var n=e.addPerson,t=e.newName,a=e.newNum,u=e.handleNameChange,c=e.handleNumberChange;return r.a.createElement("form",{onSubmit:n},r.a.createElement("div",null,"Name: ",r.a.createElement("input",{value:t,onChange:u})),r.a.createElement("div",null,"Number: ",r.a.createElement("input",{value:a,onChange:c})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"Add")))},v=function(e){var n=e.message,t=e.color;if(null===n)return null;var a={color:t,background:"lightgrey",borderStyle:"solid",borderRadius:"5",padding:"10",fontSize:20};return r.a.createElement("div",{style:a},n)},E=function(){var e=Object(a.useState)([]),n=Object(o.a)(e,2),t=n[0],u=n[1],c=Object(a.useState)(""),i=Object(o.a)(c,2),d=i[0],m=i[1],E=Object(a.useState)(""),g=Object(o.a)(E,2),w=g[0],j=g[1],O=Object(a.useState)(""),C=Object(o.a)(O,2),N=C[0],k=C[1],S=Object(a.useState)(null),y=Object(o.a)(S,2),T=y[0],A=y[1],P=Object(a.useState)("green"),D=Object(o.a)(P,2),J=D[0],U=D[1];Object(a.useEffect)((function(){f().then((function(e){u(e)}))}),[]);var x=t.filter((function(e){return e.name.toUpperCase().includes(N.toUpperCase())}));return r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(v,{message:T,color:J}),r.a.createElement("div",null,"Filter shown with ",r.a.createElement("input",{onChange:function(e){k(e.target.value)}})),r.a.createElement("h2",null,"Add a new"),r.a.createElement(p,{addPerson:function(e){e.preventDefault();var n={name:d,number:w};if(t.map((function(e){return e.name})).includes(n.name)){window.alert("".concat(n.name," is already added to phonebook, replace the old number with a new one?"));var a=t.find((function(e){return e.name===n.name})),r=a.id;b(r,n).then((function(e){u(t.map((function(n){return n.id!==r?n:e}))),U("green"),A("Modified ".concat(e.name)),setTimeout((function(){A(null)}),5e3)})).catch((function(e){U("red"),A("".concat(a.name," was already removed from server.")),setTimeout((function(){A(null)}),5e3),u(t.filter((function(e){return e.id!==r})))}))}else s(n).then((function(e){u(t.concat(e)),m(""),j(""),U("green"),A("Added ".concat(e.name)),setTimeout((function(){A(null)}),5e3)})).catch((function(e){U("red"),A("".concat(e.response.data.error)),setTimeout((function(){A(null)}),5e3)}))},newName:d,newNum:w,handleNameChange:function(e){m(e.target.value)},handleNumberChange:function(e){j(e.target.value)}}),r.a.createElement("h2",null,"Numbers"),r.a.createElement("ul",null,x.map((function(e){return r.a.createElement(l,{key:e.id,person:e,handleClick:function(){return function(e){var n=t.find((function(n){return n.id===e}));window.confirm("Want to delete ".concat(n.name,"?"))&&h(e).then((function(){u(t.filter((function(n){return n.id!==e}))),U("green"),A("Deleted ".concat(n.name)),setTimeout((function(){A(null)}),5e3)}))}(e.id)}})}))))};c.a.render(r.a.createElement(E,null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.4ddd6931.chunk.js.map